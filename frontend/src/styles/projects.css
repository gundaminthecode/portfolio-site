:root {
  /* card max width used by non-grid “projects-section” cards */
  --card-w: clamp(280px, 90vw, 560px);
  --projects-grid-max: 1600px;
  --projects-grid-vw: 96vw;
}

/* The yellow projects column/section */
.projects-section {
  width: 100%;
  max-width: 720px;
  margin-inline: auto;
  background: var(--yellow);
  border-radius: 12px;
  padding: 12px;
}

/* Cards should be fluid */
.projects-section .card {
  width: 100%;
  max-width: var(--card-w);
  height: auto;
  margin-inline: auto;
}

#projects-grid-slice .slice-content {
  display: flex;
  flex-direction: row;
  align-items: flex-start;
  gap: clamp(1rem, 1.5vw, 2rem);
  padding: clamp(1rem, 1.2vw, 2rem);
  width: 100%;                                              /* was: width: min(...); */
  max-width: min(var(--projects-grid-max), var(--projects-grid-vw));
  margin-inline: auto;
  box-sizing: border-box;
}

/* Grid panel must not grow beyond the slice width */
#projects-grid-container,
.projects-grid-container {
  flex: 4 1 0;
  min-width: 0;
  width: 100%;
  max-width: 100%;
  container-type: inline-size;
}

/* Grid: 2 cols <2000px, 3 cols ≥2000px, 1 col small */
#projects-grid, .projects-grid {
  display: grid;
  gap: clamp(0.75rem, 1.2vw, 1.25rem);
  grid-template-columns: repeat(2, minmax(0, 1fr));
  align-content: start;
  align-items: stretch;
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}

/* Children must shrink to their track width and fill it */
#projects-grid > *, .projects-grid > * {
  min-width: 0;
  max-width: 100%;
  justify-self: stretch;
  align-self: stretch;
}

/* ≥2000px: 3 columns */
@media (min-width: 2000px) {
  #projects-grid, .projects-grid { grid-template-columns: repeat(3, minmax(0, 1fr)); }
}

/* ≤700px: 1 column */
@media (max-width: 700px) {
  #projects-grid, .projects-grid { grid-template-columns: 1fr; }
}

/* Mobile: stack and make filters landscape */
@media (max-width: 1050px) {
  #projects-grid-slice .slice-content { flex-direction: column; }
  #projects-filters, .projects-filters { order: 1; width: 100%; }
  #projects-grid-container, .projects-grid-container { order: 2; width: 100%; }
}


/* Tighter slice paddings/gaps on small screens */
@media (max-width: 600px) {
  #projects-hero-slice { height: auto; margin-top: 3vh; } /* keep explicit heights/margins here */
  #projects-hero-slice .slice-content { padding: 0.75rem; }
  #projects-grid-slice .slice-content { gap: 0.75rem; padding: 0.75rem; }
}
@media (max-width: 380px) {
  #projects-grid-slice .slice-content { padding: 0.6rem; gap: 0.6rem; }
}

/* ≥1080p/4K: widen the grid slice so content isn’t too narrow */
@media (min-width: 1920px) {
  :root {
    --projects-grid-max: 2000px;  /* was 1600px */
    --projects-grid-vw: 94vw;     /* breathe a bit more on the sides */
  }
  #projects-grid-slice .slice-content {
    gap: clamp(1.25rem, 1vw, 2.5rem);
    padding: clamp(1.25rem, 1.2vw, 2.25rem);
  }
}