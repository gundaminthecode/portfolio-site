@import 'keen-slider/keen-slider.min.css';

/* Center whatever you render inside each slide */
.swiper-slide,
.keen-slider__slide {
  display: grid;
  place-items: center;
  
  --card-h: clamp(280px, 90vw, 380px);
}

/* FIX: force slide wrappers to fixed size */
.swiper:not(.swiper-vertical) .swiper-slide {
  width: var(--card-w) !important;
  height: auto !important;
}
.swiper.swiper-vertical .swiper-slide {
  height: var(--card-h) !important;
  width: auto !important;
}

/* Slide wrappers size (carousel layout concern only) */
.keen-slider__slide {
  width: var(--card-w) !important;
  height: var(--card-h) !important;
}

/* Card fills the slide; visuals come from project-cards.css */
.project-slide.project-slide--carousel {
  width: 100% !important;
  height: 100% !important;
  box-sizing: border-box;
  overflow: hidden;
}

/* Remove carousel-specific typography/spacing overrides so cards match the grid */
/* DELETE these blocks if present:
.project-slide.project-slide--carousel .project-slide__title { ... }
.project-slide.project-slide--carousel .project-slide__desc  { ... }
.project-slide.project-slide--carousel .project-slide__meta,
.project-slide.project-slide--carousel .project-slide__tags { ... }
@media (max-width: 600px) { .project-slide.project-slide--carousel { ... } }
*/

/* Control max size in one place */
:root {
  --carousel-max-width: 500px;
  --carousel-height: 20vh;

  /* Slide/card box size used by the carousel layout only */
  --card-w: min(92vw, 460px);
  --card-h: clamp(300px, 56vh, 560px);
}

.scene {
  position: relative;
  width: 100%;
  max-width: var(--carousel-max-width);
  height: var(--carousel-height);
  margin: 0 auto;                /* center within its column */
  perspective: 1000px;

  /* make height predictable and consistent across screens */
  --carousel-height: clamp(240px, 40vh, 400px);
}

/* Control size responsively */
.scene {
  --carousel-height: clamp(220px, 36vh, 400px);
  --carousel-face-h: 60%; /* slide face height inside the ring */
  height: var(--carousel-height);
  position: relative;
}

/* The rotating ring (plugin sets inline transform) */
.scene .carousel.keen-slider {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  overflow: visible;
  transform-style: preserve-3d;
}

/* Faces on the ring — center them in the scene */
.carousel.keen-slider > .keen-slider__slide.carousel__cell {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 100% !important;
  height: var(--carousel-face-h) !important;
  transform-origin: 50% 50%;
  backface-visibility: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  will-change: transform;
}

/* Ensure the ring fills the scene’s height */
.scene .carousel.keen-slider {
  height: 100%;
  transform-style: preserve-3d;
}

/* Card sizing: cap width so it doesn’t dominate on phones */
.carousel__card {
  width: 100%;
  height: 100%;
  max-width: min(92%, 420px);
  display: flex;
  flex-direction: column;
  justify-content: center;
  border-radius: 12px;
  overflow: hidden;
}

/* Step down size on smaller screens */
@media (max-width: 900px) {
  .scene { --carousel-height: clamp(200px, 34vh, 420px); --carousel-face-h: 56%; }
  .carousel__card { max-width: min(94%, 360px); }
}
@media (max-width: 600px) {
  .scene { --carousel-height: clamp(180px, 38vh, 360px); --carousel-face-h: 50%; }
  .carousel__card { max-width: min(96%, 320px); }
}
@media (max-width: 380px) {
  .scene { --carousel-height: clamp(160px, 42vh, 320px); --carousel-face-h: 46%; }
  .carousel__card { max-width: min(98%, 290px); }
}

/* Hover bob inside carousels too */
.project-slide.project-slide--carousel:hover {
  animation: hex-bob 1.4s ease-in-out infinite;
}

@media (prefers-reduced-motion: reduce) {
  .project-slide.project-slide--carousel:hover { animation: none; }
}

.carousel { --slide-h: clamp(220px, 50vh, 520px); }
.carousel__viewport { overflow: hidden; }
.carousel__track {
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: 100%;
  gap: var(--space-3);
  align-items: center;
}
.carousel__slide { position: relative; }
.carousel__slide img, .carousel__slide picture {
  width: 100%;
  height: var(--slide-h);
  object-fit: cover;
}
.carousel__nav {
  display: flex;
  justify-content: center;
  gap: var(--space-3);
  margin-top: var(--space-3);
}
.carousel__button {
  inline-size: clamp(36px, 4vw, 48px);
  block-size: clamp(36px, 4vw, 48px);
}

/* Override: allow cylinder slides to size to the face, not --card-w/h */
.carousel.keen-slider > .keen-slider__slide.carousel__cell {
  width: 100% !important;
  height: var(--carousel-face-h) !important;
}

/* Smaller type + safe wrapping inside carousel cards */
/* Keep wrapping fixes; drop padding/font-size so visuals come from project-cards.css */
.project-slide.project-slide--carousel {
  /* ...existing code... */
  /* remove padding and font-size from this block */
  overflow: hidden;
}
.project-slide.project-slide--carousel,
.project-slide.project-slide--carousel * {
  min-width: 0;                  /* allow flex/grid children to shrink */
  max-width: 100%;
  overflow-wrap: anywhere;       /* break long tokens */
  word-break: break-word;
}

/* Clamp title/desc lines and reduce sizes */
.project-slide.project-slide--carousel .project-slide__title {
  font-size: var(--fs-600);
  line-height: 1.2;
  margin: 0 0 0.35rem 0;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;         /* up to 2 lines */
  line-clamp: 2;                 /* up to 2 lines (standard) */
  overflow: hidden;
}
.project-slide.project-slide--carousel .project-slide__desc {
  font-size: var(--fs-300);
  line-height: 1.35;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 3;         /* up to 3 lines */
  line-clamp: 3;                 /* up to 3 lines (standard) */
  overflow: hidden;
}
.project-slide.project-slide--carousel .project-slide__meta,
.project-slide.project-slide--carousel .project-slide__tags {
  font-size: calc(var(--fs-300) * 0.95);
  line-height: 1.3;
}

/* Extra tightening on small screens */
@media (max-width: 600px) {
  .project-slide.project-slide--carousel { padding: 0.75rem; font-size: 0.88em; }
  .project-slide.project-slide--carousel .project-slide__title { 
    -webkit-line-clamp: 2;
    line-clamp: 2;
  }
  .project-slide.project-slide--carousel .project-slide__desc  { 
    -webkit-line-clamp: 3;
    line-clamp: 3;
  }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  .project-slide.project-slide--carousel:hover { animation: none; }
}
